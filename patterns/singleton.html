<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="prism.css"/>
    <title>Singleton Pattern</title>
</head>
<body>
<article>

    <h1>Singleton</h1>
    <p>Autor: Maximilian Joksch</p>

    <section>
        <img src="../img/singleton.svg" alt="singleton-picture"/>
    </section>

    <section>
        <h2>Abstrakte Beschreibung</h2>
        <p>
            Das Singleton Entwurfsmuster sorgt dafür, dass es von einer Klasse nur eine einzige Instanz gibt und diese
            global zugänglich ist.
        </p>
        <p>
            Damit es nur eine einzigartige Instanz gibt, muss eine Instanziierung durch den Client verhindert werden.
            Dafür wird der Konstruktur privat deklariert. Nun kann einzig der Singletoncode selbst das Singleton
            instanziieren.
        </p>
        <p>
            Weiterhin definiert die Singletonklasse eine global verfügbare Methode, in der diese einzigartige
            Singletoninstanz zurückgegeben wird. In Java wird dies mit den Modifiern public und static erreicht. Der
            Singletoncode muss (in der Methode) sicherstellen, dass immer nur ein und dasselbe Objekte an den Client
            gelangt. Die verschiedenen Varianten, dies zu realisieren, werden im Kapitel Variationen diskutiert.
        </p>
        <h4>Vorteile</h4>
        <ul>
            <li>Man kann sich sicher sein, dass eine Klasse nur eine Instanz hat.</li>
            <li>Man hat eine globale Zugriffs-Schnittstelle.</li>
            <li>Das Singleton Objekt wird nur initalisiert, wenn es gebraucht wird.</li>
        </ul>
        <h4>Nachteile</h4>
        <ul>
            <li>Verletzt das Prinzip, dass eine Klasse nur eine Aufgabe erfüllen soll. </li>
            <li>Das Singleton Pattern kann schlechtes Design verstecken.</li>
            <li>In einer multithreaded Umgebung benötigt das Singleton eine Absicherung, dass es nicht von mehreren Threads gleichzeitig instanziiert wird. </li>
        </ul>
        <pre class="line-numbers">
	  <code class="language-php">
	    &lt;?php

        namespace RefactoringGuru\Singleton\Conceptual;

        /**
         * The Singleton class defines the `GetInstance` method that serves as an
         * alternative to constructor and lets clients access the same instance of this
         * class over and over.
         */
        class Singleton
        {
            /**
             * The Singleton's instance is stored in a static field. This field is an
             * array, because we'll allow our Singleton to have subclasses. Each item in
             * this array will be an instance of a specific Singleton's subclass. You'll
             * see how this works in a moment.
             */
            private static $instances = [];

            /**
             * The Singleton's constructor should always be private to prevent direct
             * construction calls with the `new` operator.
             */
            protected function __construct() { }

            /**
             * Singletons should not be cloneable.
             */
            protected function __clone() { }

            /**
             * Singletons should not be restorable from strings.
             */
            public function __wakeup()
            {
                throw new \Exception("Cannot unserialize a singleton.");
            }

            /**
             * This is the static method that controls the access to the singleton
             * instance. On the first run, it creates a singleton object and places it
             * into the static field. On subsequent runs, it returns the client existing
             * object stored in the static field.
             *
             * This implementation lets you subclass the Singleton class while keeping
             * just one instance of each subclass around.
             */
            public static function getInstance(): Singleton
            {
                $cls = static::class;
                if (!isset(self::$instances[$cls])) {
                    self::$instances[$cls] = new static();
                }

                return self::$instances[$cls];
            }

            /**
             * Finally, any singleton should define some business logic, which can be
             * executed on its instance.
             */
            public function someBusinessLogic()
            {
                // ...
            }
        }

        /**
         * The client code.
         */
        function clientCode()
        {
            $s1 = Singleton::getInstance();
            $s2 = Singleton::getInstance();
            if ($s1 === $s2) {
                echo "Singleton works, both variables contain the same instance.";
            } else {
                echo "Singleton failed, variables contain different instances.";
            }
        }

        clientCode();
        ?>
	  </code>
	</pre>
        <a href="#">Code downloaden</a>
    </section>

    <section>
        <h2>Konkrete Beschreibung</h2>
        <p>
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet
            dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper
            suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in
            vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et accumsan et
            iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla
            facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt
            ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation
            ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in
            hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero et
            accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait
            nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod
            mazim placerat facer possim assum.
        </p>
        <a href="#">Code downloaden</a>
    </section>

    <section>
        <h5>Quellenangaben</h5>
        <table>
            <thead>
            <tr>
                <th>Name</th>
                <th>Datum</th>
                <th>Link</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Wikipedia</td>
                <td>2021-09-21</td>
                <td>
                    <a href="https://de.wikipedia.org/wiki/Singleton_(Entwurfsmuster)#:~:text=Das%20Singleton%20(selten%20auch%20Einzelst%C3%BCck,Klasse%20genau%20ein%20Objekt%20existiert.">https://de.wikipedia.org/wiki/Singleton_(Entwurfsmuster)#:~:text=Das%20Singleton%20(selten%20auch%20Einzelst%C3%BCck,Klasse%20genau%20ein%20Objekt%20existiert.</a>
                </td>
            </tr>
            <tr>
                <td>Philipp Hauer</td>
                <td>2021-09-21</td>
                <td><a href="https://www.philipphauer.de/study/se/design-pattern/singleton.php">https://www.philipphauer.de/study/se/design-pattern/singleton.php</a>
                </td>
            </tr>
            <tr>
                <td>Ionos</td>
                <td>2021-09-21</td>
                <td><a href="https://www.ionos.de/digitalguide/websites/web-entwicklung/was-ist-das-singleton-pattern/">https://www.ionos.de/digitalguide/websites/web-entwicklung/was-ist-das-singleton-pattern/</a>
                </td>
            </tr>
            <tr>
                <td>Refactoring Guru</td>
                <td>2021-09-21</td>
                <td><a href="https://refactoring.guru/design-patterns/singleton">https://refactoring.guru/design-patterns/singleton</a>
                </td>
            </tr>
            </tbody>
        </table>
    </section>
</article>
<script src="prism.js"></script>
</body>
</html>
